调教AI的需求，后期优化的需求：



1. 需求一：

   需要在“我的任务”按钮上，显示数字小标识，数字为统计今天未完成（运行中、排队中）的任务数量，遵循以下3个要求：

   1. 如果用户选择对应的菜单（文生图，图生图，文生视频，图生视频），那只统计对应类型的未完成数。
   2. 如果选择除此之外的其他菜单， 数字显示应该是今天未完成的所有任务。
   3. 选择对应菜单后需要高亮当前菜单。

   

2. **需求二**：

   当服务重启后，你需要添加一个监听器，去异步监控最近两天未完成状态的所有任务，然后去调用 comfyui 的接口查看执行状态。当发生以下3种情况后，就结束监控任务，否则持续监控，直到所有任务完成为止。

   1. 如果 comfyui 中该任务执行已经完成，你需要将任务结果数据更新并将结果存储在指定位置，然后就可以结束对该任务的监控。
   2. 如果该任务还未提交到comfyui中，你需要重新提交该任务，并继续跟进，直到完成。
   3. 如果任务已经在运行中，且从提交运行到目前为止，执行时长已经超过2小时了，那就停止对该任务的监控，并更新数据，标记为“失败”状态，并给出说明。

   注意点：注意区分新提交的任务。

   建议：你可以将旧的任务与新的任务，用同一种机制去处理，当用户提交任务后都需要异步监控任务状态，并更新状态和保存结果。

   

3. 需求三：

   当任务提交后，你需要显示任务池的状态，包括：预计等待时长（时间线显示），排队状态，友好的用户提示语。

   

4. **需求四**：

   任务状态的变更，之前是用定时任务调用接口的方式，现要求改为 websocket 方式，当任务完成后，刷新任务状态、未完成任务的统计数、在结果中展示任务结果等。

   

5. 需求五：

   1.我的任务界面添加状态和类型筛选。 2.图生图和文生视频界面的参数，显示结果放在选择框之后，而不是放在下一行，参考文生图界面

   

6. 需求六：所有提交任务异常后，右下角弹框提示，显示三秒后消失，包括参数校验提示。不要在页面中出现alert弹框

7. 需求七：



