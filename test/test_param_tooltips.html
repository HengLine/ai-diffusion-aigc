<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>参数标签测试页面</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            background-color: #f5f5f5;
        }
        .container {
            background-color: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            margin-top: 2rem;
        }
        .form-group {
            margin-bottom: 1.5rem;
        }
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #2c3e50;
        }
        .form-group input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
            box-sizing: border-box;
        }
        .form-group textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
            box-sizing: border-box;
        }
        /* Tab 样式 */
        .tab-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }
        .tab-btn {
            background-color: #ccc;
            color: #333;
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .tab-btn.active {
            background-color: #4a6fa5;
            color: white;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .grid-form {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }
        /* 参数标签样式 */
        .param-tooltip {
            position: relative;
            display: inline-block;
            margin-left: 0.5rem;
        }
        .param-icon {
            background-color: #4a6fa5;
            color: white;
            border-radius: 50%;
            width: 16px;
            height: 16px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            cursor: help;
        }
        .param-content {
            visibility: hidden;
            width: 300px;
            background-color: #2c3e50;
            color: white;
            text-align: left;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 1000;
            bottom: 125%;
            left: 50%;
            margin-left: -150px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 12px;
            line-height: 1.4;
            white-space: pre-line;
        }
        .param-content::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #2c3e50 transparent transparent transparent;
        }
        .param-tooltip:hover .param-content {
            visibility: visible;
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>参数标签功能测试</h1>
        
        <!-- Tab 切换按钮 -->
        <div class="tab-buttons">
            <button type="button" class="tab-btn active" onclick="openTab(event, 'textToImage')">文生图</button>
            <button type="button" class="tab-btn" onclick="openTab(event, 'imageToImage')">图生图</button>
            <button type="button" class="tab-btn" onclick="openTab(event, 'textToVideo')">文生视频</button>
            <button type="button" class="tab-btn" onclick="openTab(event, 'imageToVideo')">图生视频</button>
        </div>
        
        <!-- 文生图 Tab 内容 -->
        <div id="textToImage" class="tab-content active">
            <h3>文生图参数</h3>
            <div class="grid-form">
                <div class="form-group">
                    <label for="tti_width">生成图片宽度 <span style="color: red;">*</span></label>
                    <input type="number" id="tti_width" name="tti_width" value="1024" min="256" max="2048" step="64">
                </div>
                <div class="form-group">
                    <label for="tti_height">生成图片高度 <span style="color: red;">*</span></label>
                    <input type="number" id="tti_height" name="tti_height" value="1024" min="256" max="2048" step="64">
                </div>
                <div class="form-group">
                    <label for="tti_steps">步数 <span style="color: red;">*</span></label>
                    <input type="number" id="tti_steps" name="tti_steps" value="30" min="1" max="100">
                </div>
                <div class="form-group">
                    <label for="tti_cfg">CFG Scale <span style="color: red;">*</span></label>
                    <input type="number" id="tti_cfg" name="tti_cfg" value="8" min="1" max="100" step="0.5">
                </div>
            </div>
        </div>
        
        <!-- 图生图 Tab 内容 -->
        <div id="imageToImage" class="tab-content">
            <h3>图生图参数</h3>
            <div class="grid-form">
                <div class="form-group">
                    <label for="iti_width">生成图片宽度 <span style="color: red;">*</span></label>
                    <input type="number" id="iti_width" name="iti_width" value="1024" min="256" max="2048" step="64">
                </div>
                <div class="form-group">
                    <label for="iti_height">生成图片高度 <span style="color: red;">*</span></label>
                    <input type="number" id="iti_height" name="iti_height" value="1024" min="256" max="2048" step="64">
                </div>
                <div class="form-group">
                    <label for="iti_denoise">降噪强度</label>
                    <input type="number" id="iti_denoise" name="iti_denoise" value="0.6" min="0" max="1" step="0.05">
                </div>
            </div>
        </div>
        
        <!-- 文生视频 Tab 内容 -->
        <div id="textToVideo" class="tab-content">
            <h3>文生视频参数</h3>
            <div class="grid-form">
                <div class="form-group">
                    <label for="ttv_width">生成视频宽度 <span style="color: red;">*</span></label>
                    <input type="number" id="ttv_width" name="ttv_width" value="768" min="256" max="1024" step="64">
                </div>
                <div class="form-group">
                    <label for="ttv_height">生成视频高度 <span style="color: red;">*</span></label>
                    <input type="number" id="ttv_height" name="ttv_height" value="576" min="256" max="1024" step="64">
                </div>
                <div class="form-group">
                    <label for="ttv_length">生成视频长度（秒） <span style="color: red;">*</span></label>
                    <input type="number" id="ttv_length" name="ttv_length" value="5" min="2" max="30" step="1">
                </div>
                <div class="form-group">
                    <label for="ttv_fps">帧率 <span style="color: red;">*</span></label>
                    <input type="number" id="ttv_fps" name="ttv_fps" value="16" min="1" max="120" step="1">
                </div>
                <div class="form-group">
                    <label for="ttv_denoise">降噪强度</label>
                    <input type="number" id="ttv_denoise" name="ttv_denoise" value="0.55" min="0" max="1" step="0.01">
                </div>
            </div>
        </div>
        
        <!-- 图生视频 Tab 内容 -->
        <div id="imageToVideo" class="tab-content">
            <h3>图生视频参数</h3>
            <div class="grid-form">
                <div class="form-group">
                    <label for="itv_width">生成视频宽度 <span style="color: red;">*</span></label>
                    <input type="number" id="itv_width" name="itv_width" value="768" min="256" max="1024" step="64">
                </div>
                <div class="form-group">
                    <label for="itv_height">生成视频高度 <span style="color: red;">*</span></label>
                    <input type="number" id="itv_height" name="itv_height" value="576" min="256" max="1024" step="64">
                </div>
                <div class="form-group">
                    <label for="itv_length">生成视频长度（秒） <span style="color: red;">*</span></label>
                    <input type="number" id="itv_length" name="itv_length" value="5" min="2" max="30">
                </div>
                <div class="form-group">
                    <label for="itv_fps">帧率 <span style="color: red;">*</span></label>
                    <input type="number" id="itv_fps" name="itv_fps" value="16" min="1" max="120" step="1">
                </div>
                <div class="form-group">
                    <label for="itv_denoise">降噪强度</label>
                    <input type="number" id="itv_denoise" name="itv_denoise" value="0.6" min="0" max="1" step="0.01">
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tab 切换功能
        function openTab(evt, tabName) {
            // 隐藏所有 tab 内容
            var tabcontent = document.getElementsByClassName("tab-content");
            for (var i = 0; i < tabcontent.length; i++) {
                tabcontent[i].className = tabcontent[i].className.replace(" active", "");
            }
            
            // 重置所有 tab 按钮样式
            var tablinks = document.getElementsByClassName("tab-btn");
            for (var i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" active", "");
            }
            
            // 显示当前 tab 内容并设置按钮样式
            document.getElementById(tabName).className += " active";
            evt.currentTarget.className += " active";
        }
        
        // 参数说明功能
        document.addEventListener('DOMContentLoaded', function() {
            // 模拟的参数说明配置数据
            const paramExplanations = {
                "common": {
                    "width": "图片/视频的水平像素数，影响生成内容的横向分辨率。常见值范围：256-2048。值越高，细节越丰富，但处理时间也会增加。建议在设备性能允许的范围内选择合适的值，同时注意保持合理的宽高比。",
                    "height": "图片/视频的垂直像素数，影响生成内容的纵向分辨率。常见值范围：256-2048。值越高，细节越丰富，但处理时间也会增加。建议在设备性能允许的范围内选择合适的值，同时注意保持合理的宽高比。",
                    "steps": "生成过程中的迭代次数，决定了模型对输入的处理精细程度。常见值范围：10-50。\n- 10-20：快速生成，质量一般，适合测试提示词效果\n- 20-30：平衡选择，质量和速度兼顾\n- 30-50：高质量生成，细节丰富，但处理时间较长\n值越高，质量越好，但处理时间也会增加。",
                    "cfg": "Classifier-Free Guidance Scale，控制生成结果与提示词的匹配程度。常见值范围：1-30。\n- 1-5：结果更加多样化，但可能偏离提示词\n- 7-12：推荐范围，平衡创造力和提示词符合度\n- 15-30：严格遵循提示词，但可能导致细节丢失或画面不自然\n值越高，生成结果越贴近提示词，但可能会导致细节丢失；值越低，生成结果更加多样化，但可能偏离提示词。",
                    "batch_size": "一次生成的图片/视频数量。常见值范围：1-8。值越高，一次能获得的结果越多，但消耗的计算资源也会增加。根据设备显存大小选择合适的值，显存不足时容易导致程序崩溃。",
                    "seed": "随机种子，控制生成过程的随机性。使用相同的种子可以复现相同的结果；设置为-1则每次使用随机种子。",
                    "prompt": "提示词，用于描述您想要生成的内容。越详细、具体的描述，越能获得符合预期的结果。建议包含风格、细节、色彩、光线等具体描述。",
                    "negative_prompt": "负面提示词，用于描述您不想要在生成内容中出现的元素。可以有效避免低质量、模糊等问题。常见负面提示：低质量、模糊、噪点、扭曲、失真、错别字等。"
                },
                "to_image": {
                    "width": "生成图片的水平像素数，建议根据您的需求和设备性能选择合适的值。对于图生图，建议与原图保持相同比例以获得最佳效果。常见值范围：256-2048。",
                    "height": "生成图片的垂直像素数，建议根据您的需求和设备性能选择合适的值。对于图生图，建议与原图保持相同比例以获得最佳效果。常见值范围：256-2048。",
                    "denoise": "图生图的降噪强度，控制原图特征的保留程度。值范围：0.1-1.0。\n- 0.1~0.3：极轻微修改，几乎保留原图结构、色彩、构图。适用于照片修复、细节锐化、轻微调色、去除小噪点\n- 0.4~0.6：推荐起点（黄金区间），有明显风格转变，但仍保留主体结构。适用于风格迁移（如油画、动漫风）、调整光影、换背景但保留人物\n- 0.7~0.85：强烈重构，主体可能被重新绘制，创意空间大。适用于彻底改变氛围（如白天→夜晚）、艺术再创作、大幅风格转换\n- 0.85~1.0：几乎完全重绘，相当于\"用原图当提示\"进行文生图。仅保留轮廓/颜色分布，内容基本由prompt决定（慎用）"
                },
                "to_video": {
                    "width": "生成视频的水平像素数，建议根据您的需求和设备性能选择合适的值。常见值范围：256-2048。",
                    "height": "生成视频的垂直像素数，建议根据您的需求和设备性能选择合适的值。常见值范围：256-2048。",
                    "length": "生成视频的总时长（秒）。常见值范围：2-15。值越高，视频越长，但生成时间也会显著增加。受限于计算资源，不建议设置过长。",
                    "fps": "视频的帧率（每秒帧数）。常见值范围：12-30。\n- 12-15fps：低帧率，适合艺术效果或节省资源\n- 24fps：标准电影帧率，流畅度和自然度良好\n- 30fps：更高流畅度，适合快速运动场景\n值越高，视频越流畅，但文件大小和生成时间也会增加。",
                    "shift": "视频生成过程中的帧移参数，影响视频的连贯性和流畅度。常见值范围：0.05-0.3。\n- 0.05-0.1：轻微移动，适合静态场景或微妙变化\n- 0.1-0.2：中等移动，适合大多数场景\n- 0.2-0.3：明显移动，适合动态场景或快速变化\n值适中可以获得自然的动态效果。",
                    "denoise": "视频生成过程中的降噪强度，影响视频的清晰度和连贯性。对于图生视频，还控制原图特征的保留和动态效果的添加。值范围：0.1-1.0。\n- 0.1-0.3：保留原图大部分特征，轻微添加动态效果\n- 0.4-0.6：平衡选择，保留主体同时添加明显动态\n- 0.7-1.0：强烈动态效果，原图特征保留较少\n值过低可能导致视频模糊或缺乏动态，值过高可能导致画面闪烁或与原图差异过大。"
                }
            };
            
            // 为所有参数标签添加说明标签
            const paramLabels = document.querySelectorAll('.form-group label');
            
            paramLabels.forEach(label => {
                // 获取参数ID
                const forAttr = label.getAttribute('for');
                if (!forAttr) return;
                
                // 确定参数类型和名称
                let paramType = 'common';
                let paramName = forAttr;
                
                // 根据ID前缀判断参数所属类型
                if (forAttr.startsWith('tti_') || forAttr.startsWith('iti_')) {
                    paramType = 'to_image';
                    paramName = forAttr.substring(4);
                } else if (forAttr.startsWith('ttv_') || forAttr.startsWith('itv_')) {
                    paramType = 'to_video';
                    paramName = forAttr.substring(4);
                }
                
                // 获取参数说明
                let explanation = '';
                if (paramExplanations[paramType] && paramExplanations[paramType][paramName]) {
                    explanation = paramExplanations[paramType][paramName];
                } else if (paramExplanations.common && paramExplanations.common[paramName]) {
                    explanation = paramExplanations.common[paramName];
                }
                
                // 如果有说明，添加标签
                if (explanation) {
                    const tooltip = document.createElement('div');
                    tooltip.className = 'param-tooltip';
                    tooltip.innerHTML = `
                        <div class="param-icon">?</div>
                        <div class="param-content">${explanation}</div>
                    `;
                    label.appendChild(tooltip);
                }
            });
        });
    </script>
</body>
</html>